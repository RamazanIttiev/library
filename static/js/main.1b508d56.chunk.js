(this.webpackJsonplibrary=this.webpackJsonplibrary||[]).push([[0],{121:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a,r,c=n(2),i=n(0),o=n(10),s=n.n(o),l=(n(121),n(105)),j=n(207),u=n(209),b=n(12),d=n(22),p=n(106),O=n(19),h=n(20),m=n(16),g=n(29),f=n.n(g),x=n(47),v=n(95),y=n.n(v).a.create({baseURL:"http://localhost:3004",timeout:1e4}),k=n(72),w=n(213),C=Object(O.c)(),N=C.getSelectors((function(e){return e.categories})),B=Object(O.b)("categories/fetchCategories",Object(x.a)(f.a.mark((function e(){var t,n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("/categories");case 2:return t=e.sent,n=t.data,a=new k.b.Entity("booksList"),r=new k.b.Entity("categories",{booksList:[a]}),c=Object(k.a)({categories:n},{categories:[r]}),e.abrupt("return",c.entities);case 8:case"end":return e.stop()}}),e)})))),S=Object(O.b)("categories/addCategory",function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(w.a)(),a={id:n,title:t,booksList:[]},e.next=4,y.post("/categories",Object(m.a)({},a));case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(O.b)("categories/deleteCategory",function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,y.delete("/categories/".concat(t));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(O.d)({name:"categories",initialState:C.getInitialState({isFetching:!1}),extraReducers:(a={},Object(h.a)(a,B.pending,(function(e){e.isFetching=!0})),Object(h.a)(a,B.fulfilled,(function(e,t){var n=t.payload;e.isFetching=!1,C.upsertMany(e,n.categories)})),Object(h.a)(a,S.pending,(function(e){e.isFetching=!0})),Object(h.a)(a,S.fulfilled,(function(e,t){var n=t.payload;e.isFetching=!1,C.addOne(e,n)})),Object(h.a)(a,F.pending,(function(e){e.isFetching=!0})),Object(h.a)(a,F.fulfilled,(function(e,t){var n=t.payload;e.isFetching=!1,C.removeOne(e,n)})),a)}).reducer,I=Object(O.c)(),A=(I.getSelectors((function(e){return e.books})),Object(O.b)("books/fetchBooks",function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/books",{params:{title:t}});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),R=Object(O.b)("books/addBook",function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r,c,i,o,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.author,r=t.image,c=t.description,i=t.category,o={id:Object(w.a)(),title:n,image:r,author:a,category:i,description:c},e.next=4,y.post("/books",Object(m.a)({},o));case 4:return s=e.sent,l=s.data,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(O.d)({name:"books",initialState:I.getInitialState({allBooks:[]}),extraReducers:(r={},Object(h.a)(r,B.fulfilled,(function(e,t){var n=t.payload;I.upsertMany(e,n.booksList)})),Object(h.a)(r,A.fulfilled,(function(e,t){t.payload.map((function(t){return e.allBooks.push(t)}))})),r)}).reducer,W=Object(O.d)({name:"admin",initialState:{loginRequest:!1,isAdmin:!0},reducers:{isAdmin:{reducer:function(e,t){var n=t.payload.isAdmin;e.isAdmin=n},prepare:function(e){return{payload:{isAdmin:e}}}}}}),P=W.actions.isAdmin,D=W.reducer,q=Object(O.a)({reducer:{categories:L,books:z,adminLogin:D},middleware:Object(p.a)(Object(O.e)())}),E=n(13),H=n(188),T=n(192),M=n(193),V=n(194),J=n(195),_=n(99),G=n.n(_),U=function(){return Object(c.jsxs)(H.a,{maxWidth:"md",children:[Object(c.jsx)("h1",{children:"Home Page"}),Object(c.jsx)(T.a,{children:Object(c.jsx)(d.b,{to:"/library",children:Object(c.jsxs)(M.a,{button:!0,children:[Object(c.jsx)(V.a,{children:Object(c.jsx)(G.a,{})}),Object(c.jsx)(J.a,{primary:"Library"})]})})})]})},K=n(196),Q=n(214),X=n(197),Y=Object(K.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Z=function(e){var t=e.open,n=Y();return Object(c.jsx)(Q.a,{className:n.backdrop,open:t,children:Object(c.jsx)(X.a,{color:"inherit"})})},$=Object(i.memo)(Z),ee=n(66),te=n(67),ne=n(71),ae=n(70),re=n(59),ce=n(198),ie=n(199),oe=n(201),se=n(200),le=Object(K.a)({root:{maxWidth:280,maxHeight:"70%",marginBottom:24},media:{height:140}}),je=function(e){var t=e.title,n=e.description,a=e.author,r=e.image,i=(e.id,e.category),o=le();return Object(c.jsx)(ce.a,{className:o.root,children:Object(c.jsxs)(ie.a,{children:[Object(c.jsx)(se.a,{className:o.media,image:r,title:"Contemplative Reptile"}),Object(c.jsxs)(oe.a,{children:[Object(c.jsx)(re.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t}),Object(c.jsx)(re.a,{variant:"body2",color:"textSecondary",component:"p",children:n}),Object(c.jsx)(re.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a}),Object(c.jsx)(re.a,{gutterBottom:!0,variant:"h6",component:"h6",children:i})]})]})})},ue=function(e){var t=e.books;return Object(c.jsx)(c.Fragment,{children:t.length?t.map((function(e){var t=e.title,n=e.description,a=e.author,r=e.image,i=e.id,o=e.category;return Object(c.jsx)(je,{id:i,author:a,title:t,image:r,description:n,category:o},i)})):Object(c.jsx)(re.a,{children:"\u0417\u0434\u0435\u0441\u044c \u0435\u0449\u0451 \u043d\u0435\u0442 \u043a\u043d\u0438\u0433"})})},be=n(5),de=n(40),pe=n(100),Oe=n.n(pe),he=function(e){return e.adminLogin.isAdmin},me=n(216),ge=n(202),fe=n(210),xe=n(203),ve=n(68),ye=n.n(ve),ke=Object(K.a)((function(e){return{drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},toolbarIcon:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),secondList:{marginTop:"auto"},link:{textDecoration:"none",fontSize:26},active:{background:"#eaeaea"},title:{padding:"16px 0 16px 16px"}}})),we=function(){var e=ke(),t=Object(b.c)(),n=Object(b.d)(N.selectAll),a=Object(i.useState)(""),r=Object(de.a)(a,2),o=r[0],s=r[1],l=Object(b.d)(he);return Object(c.jsxs)(me.a,{variant:"permanent",classes:{paper:ye()(e.drawerPaper)},open:!0,children:[Object(c.jsx)(re.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title,children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(c.jsx)(ge.a,{}),Object(c.jsx)(T.a,{children:n.map((function(n){var a=n.id,r=n.title;return Object(c.jsx)(d.c,{to:"/categories/".concat(a),className:e.link,activeClassName:e.active,children:Object(c.jsxs)(M.a,{children:[Object(c.jsx)(J.a,{children:r}),l?Object(c.jsx)(Oe.a,{onClick:function(){return function(e){t(F(e))}(a)}}):null]})},a)}))}),l?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(fe.a,{id:"outlined-secondary",label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",variant:"outlined",color:"secondary",onChange:function(e){return function(e){s(e.target.value)}(e)},value:o}),Object(c.jsx)(xe.a,{variant:"contained",color:"primary",size:"small",className:e.button,onClick:function(){return function(e){t(S(e)),s("")}(o)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}):null,Object(c.jsx)(ge.a,{})]})},Ce=n(204),Ne=n(205),Be=n(217),Se=n(101),Fe=n.n(Se),Le=n(102),Ie=n.n(Le),Ae=n(103),Re=n.n(Ae),ze=Object(K.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},toolbar:{paddingRight:24},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1,marginLeft:e.spacing(1)}}})),We=function(){var e=ze(),t=Object(b.c)(),n=Object(i.useState)(!0),a=Object(de.a)(n,2),r=a[0],o=a[1],s=Object(b.d)(he);return Object(c.jsx)(Ce.a,{position:"absolute",className:ye()(e.appBar,e.appBarShift),children:Object(c.jsxs)(Ne.a,{className:e.toolbar,children:[Object(c.jsx)(Be.a,{}),Object(c.jsx)(d.c,{to:"/",children:Object(c.jsx)(Fe.a,{})}),Object(c.jsx)(d.c,{to:"/library",children:Object(c.jsx)(Ie.a,{})}),s?Object(c.jsx)(d.c,{to:"/addbook",children:Object(c.jsx)(xe.a,{variant:"contained",color:"primary",size:"small",className:e.button,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443"})}):null,Object(c.jsx)(re.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title}),Object(c.jsx)(xe.a,{onClick:function(){o(!r),t(P(!r))},children:r?Object(c.jsx)("span",{children:"\u0412\u044b - \u0410\u0434\u043c\u0438\u043d"}):Object(c.jsx)("span",{children:"\u0412\u044b - \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"})}),Object(c.jsx)(d.c,{to:"/login",children:Object(c.jsx)(xe.a,{children:Object(c.jsx)(Re.a,{})})})]})})},Pe=Object(be.a)((function(e){return{root:{display:"flex",minHeight:"100vh"},container:{marginTop:88,display:"flex",justifyContent:"space-evenly",flexWrap:"wrap",minHeight:"100vh"}}}))((function(e){var t=e.children,n=e.classes;return Object(c.jsxs)("div",{className:n.root,children:[Object(c.jsx)(We,{}),Object(c.jsx)(we,{}),Object(c.jsx)(H.a,{maxWidth:"md",classes:{root:n.container},children:t})]})})),De=function(e,t){var n=e.categories.entities,a=e.books.entities;return t in n?n[t].booksList.map((function(e){return a[e]})):[]},qe=function(e){return e.categories.isFetching},Ee=function(e){return e.books.allBooks},He=function(e){Object(ne.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(ee.a)(this,n),t.apply(this,arguments)}return Object(te.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchCategories)()}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.isFetching;return Object(c.jsxs)(Pe,{children:[Object(c.jsx)($,{open:n}),Object(c.jsx)(ue,{books:t})]})}}]),n}(i.Component),Te={fetchCategories:B},Me=Object(b.b)((function(e,t){var n=t.match.params.id;return{books:De(e,n),isFetching:qe(e)}}),Te)(He),Ve=Object(K.a)((function(e){return{root:{margin:e.spacing(2),width:"100%"}}})),Je=function(){var e=Ve(),t=Object(b.c)();return Object(c.jsx)("form",{className:e.root,noValidate:!0,autoComplete:"off",children:Object(c.jsx)(fe.a,{onChange:function(e){return n=e.target.value,void t(A(n));var n},className:e.root,id:"standard-basic",label:"\u041f\u043e\u0438\u0441\u043a \u043a\u043d\u0438\u0433\u0438"})})},_e=function(e){Object(ne.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(ee.a)(this,n),t.apply(this,arguments)}return Object(te.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchBooks;(0,e.fetchCategories)(),t()}},{key:"render",value:function(){var e=this.props.classes,t=this.props,n=t.books,a=t.isFetching;return Object(c.jsxs)(Pe,{children:[Object(c.jsx)("h1",{className:e.library_title,children:"\u0412\u0430\u0448\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430"}),Object(c.jsx)(Je,{}),Object(c.jsx)($,{open:a}),Object(c.jsx)(ue,{books:n})]})}}]),n}(i.Component),Ge={fetchBooks:A,fetchCategories:B},Ue=Object(b.b)((function(e){return{books:Ee(e),isFetching:qe(e)}}),Ge)(Object(be.a)((function(){return{library_title:{width:"100%",textAlign:"center",marginBottom:24}}}))(_e)),Ke=n(208),Qe=n(212),Xe=n(108),Ye=n(206),Ze=n(104),$e=n.n(Ze),et=Object(K.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),tt=function(){var e=et(),t=Object(i.useState)({email:"",password:""}),n=Object(de.a)(t,2),a=n[0],r=n[1],o=function(e){var t=e.target,n=t.name,c=t.value;r(Object(m.a)(Object(m.a)({},a),{},Object(h.a)({},n,c)))},s=Object(b.d)((function(e){return e.loginRequest}));return Object(c.jsxs)(Ye.a,{container:!0,component:"main",className:e.root,children:[Object(c.jsx)(j.a,{}),Object(c.jsx)(Ye.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(c.jsx)(Ye.a,{item:!0,xs:12,sm:8,md:5,component:Xe.a,elevation:6,square:!0,children:Object(c.jsxs)("div",{className:e.paper,children:[Object(c.jsx)(Be.a,{className:e.avatar,children:Object(c.jsx)($e.a,{})}),Object(c.jsx)(re.a,{component:"h1",variant:"h5",children:"LogIn"}),Object(c.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(c.jsx)(fe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,onChange:o,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0}),Object(c.jsx)(fe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",onChange:o,label:"Password",type:"password",id:"password",autoComplete:"off"}),Object(c.jsx)(Ke.a,{control:Object(c.jsx)(Qe.a,{value:"remember",color:"primary"}),label:"Remember me \u041f\u043e\u0442\u043e\u043c \u0441\u0434\u0435\u043b\u0430\u0442\u044c LocalStorage"}),Object(c.jsx)(xe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:s,children:"LogIn"})]})]})})]})},nt=Object(K.a)((function(e){return{root:{margin:"0 auto",width:"80%",flexDirection:"column",textAlign:"center"},title:{width:"100%",marginBottom:48,textAlign:"center"},input:{width:"100%",marginBottom:24},button:{display:"block",margin:"0 auto"}}})),at=function(){var e=nt(),t=Object(b.c)(),n=Object(i.useState)({}),a=Object(de.a)(n,2),r=a[0],o=a[1];return Object(i.useEffect)((function(){t(B())}),[t]),Object(b.d)(he)?Object(c.jsx)(Pe,{children:Object(c.jsxs)(H.a,{children:[Object(c.jsx)("h1",{className:e.title,children:"\u0414\u043e\u0431\u0430\u0432\u044c \u0441\u0432\u043e\u044e \u043a\u043d\u0438\u0433\u0443"}),Object(c.jsxs)("form",{className:e.root,noValidate:!0,autoComplete:"off",children:[Object(c.jsx)(fe.a,{className:e.input,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",variant:"outlined",color:"secondary",name:"title",onChange:function(e){return o(Object(m.a)(Object(m.a)({},r),{},{title:e.target.value}))}}),Object(c.jsx)(fe.a,{className:e.input,label:"\u0410\u0432\u0442\u043e\u0440",variant:"outlined",color:"secondary",name:"author",onChange:function(e){return o(Object(m.a)(Object(m.a)({},r),{},{author:e.target.value}))}}),Object(c.jsx)(fe.a,{className:e.input,label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",variant:"outlined",color:"secondary",name:"category",onChange:function(e){return o(Object(m.a)(Object(m.a)({},r),{},{category:e.target.value}))}}),Object(c.jsx)(fe.a,{className:e.input,label:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",variant:"outlined",color:"secondary",name:"image",onChange:function(e){return o(Object(m.a)(Object(m.a)({},r),{},{image:e.target.value}))}}),Object(c.jsx)(fe.a,{className:e.input,label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",multiline:!0,rows:4,variant:"outlined",color:"secondary",name:"description",onChange:function(e){return o(Object(m.a)(Object(m.a)({},r),{},{description:e.target.value}))}})]}),Object(c.jsx)(xe.a,{variant:"contained",color:"primary",size:"large",onClick:function(){t(R(r))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})}):Object(c.jsx)(E.a,{to:"library"})},rt=function(){var e=Object(b.d)(qe);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)($,{open:e}),Object(c.jsxs)(E.d,{children:[Object(c.jsx)(E.b,{exact:!0,path:"/",children:Object(c.jsx)(U,{})}),Object(c.jsx)(E.b,{path:"/library",component:Ue}),Object(c.jsx)(E.b,{path:"/categories/:id",component:Me}),Object(c.jsx)(E.b,{path:"/login",children:Object(c.jsx)(tt,{})}),Object(c.jsx)(E.b,{path:"/addbook",children:Object(c.jsx)(at,{})})]})]})},ct=Object(l.a)(),it=function(){return Object(c.jsx)(b.a,{store:q,children:Object(c.jsx)(d.a,{children:Object(c.jsxs)(u.a,{theme:ct,children:[Object(c.jsx)(j.a,{}),Object(c.jsx)(rt,{})]})})})},ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};n(147);s.a.render(Object(c.jsx)(it,{}),document.getElementById("root")),ot()}},[[148,1,2]]]);
//# sourceMappingURL=main.1b508d56.chunk.js.map